---
import {slugify} from '../lib/utils.js';

const {filteritems} = Astro.props;
---
<ul class="project-filter">
  {filteritems &&
    filteritems.map((item:any) => (
    <li>
      <a class="filter-button" data-query={slugify(item)} >{item}</a>
    </li>
  ))}
  <li class="filter-reset"></li>
</ul>


<script>
  //@ts-nocheck
  function filterProjects(filter) {

    const projectCards = document.querySelectorAll('.project-card');

    projectCards.forEach(card => {

      const query = card.getAttribute('data-query').split(' ');
      
      if (query.includes(filter) || filter === 'all') {
        card.style.display = 'block';
      } else {
        card.style.display = 'none';
      }
    });
  }
  
  document.addEventListener('astro:page-load', function() {
    // Check of de benodigde elementen op de pagina aanwezig zijn
    const filterButtons = document.querySelectorAll('.filter-button');
    const filterReset = document.querySelector('.filter-reset');
  
    if (filterButtons.length === 0 || !filterReset) {
      // Stop als de elementen niet aanwezig zijn
      return;
    }
  
    filterButtons.forEach(button => {
      button.addEventListener('click', () => {
        const activeFilter = button.getAttribute('data-query');
        filterProjects(activeFilter);
      });
    });
  
    // Voeg een knop toe om alle projecten te tonen
    const showAllButton = document.createElement('a');
    showAllButton.textContent = 'Reset';
    showAllButton.addEventListener('click', () => {
      filterProjects('all');
    });
    filterReset.append(showAllButton);
  
    // Reset bij het laden van de pagina
    filterProjects('all');
  
  }, { once: false });
  </script>
  

<style>

  /* * {
    border: 1px solid red;
  } */
  ul {
    display: flex;
    flex-wrap: wrap;
    gap:0.25em 0.25em ;
    font-size: var(--fs--1);
    line-height: 120%;
    font-weight: 400;
  }

  li {
    
  }

  li::after {
    content: "/";
    font-weight:700;
    opacity: 0.2;
    padding: 0 0.125em
    
  }

  li:last-child::after {
    content: "";
  }
  a {
    text-decoration: none!important;
    padding:0;
    cursor: pointer;
    
  }

</style>